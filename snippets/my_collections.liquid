<div class="customCollection">
  <ul class="customList">
    {% for product in section.settings.collection.products %}
      <li class="customItem">
        {% if product.featured_image %}
          <img class="customImage" width="300" height="300" src="{{ product | image_url }}" alt="product"/>
        {% endif %}
        <h3>{{ product.title }}</h3>
        <p class="customDescription">{{ product.description }}</p>
        {% assign customPrice = product.price %}
        
        <select class="customSelect" name="Sort_ByColor" id="SortByColor">
          {% for variant in product.variants %}
            <option value="{{ variant.title | escape }}" data-variant-price="{{ variant.price }}">{{ variant.title }}</option>
          {% endfor %}
        </select>
        
        <p id="customPrice">{{ customPrice | money_with_currency }}</p>
      </li>
    {% endfor %}
  </ul>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
  var selectElement = document.getElementById('SortByColor');
  var priceElement = document.getElementById('customPrice');
  
  selectElement.addEventListener('change', function() {
    var selectedOption = selectElement.options[selectElement.selectedIndex];
    var selectedPrice = selectedOption.getAttribute('data-variant-price');
    var formattedPrice = formatCurrency(selectedPrice);

    priceElement.innerText = formattedPrice;
  });

  function formatCurrency(amount) {
    var formattedAmount = (parseFloat(amount) / 100).toFixed(2);
    return "â‚´ " + formattedAmount + " UAH";
  }
});
</script>